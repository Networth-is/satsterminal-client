!function(){const e=new Set,t=new Set,r={},o=["unisat","XverseProviders","magicEden","okxwallet","LeatherProvider","phantom","OrangeWalletProviders"],a="https://beta.satsterminal.com";function s(e){return Object.keys(e).filter((t=>"function"==typeof e[t]))}function i(e){document.querySelectorAll("iframe").forEach((t=>{try{t.contentWindow.postMessage(e,a)}catch(e){}}))}function n(){o.forEach((r=>{try{window[r]&&!t.has(r)&&function(r){try{const o=window[r];if(o&&!t.has(r)){if("XverseProviders"===r&&o.BitcoinProvider)try{i({type:"PROVIDER_METADATA",providerName:"XverseProviders",methods:s(o)}),i({type:"PROVIDER_METADATA",providerName:"XverseProviders.BitcoinProvider",methods:s(o.BitcoinProvider)})}catch(e){}else try{i({type:"PROVIDER_METADATA",providerName:r,methods:s(o)})}catch(e){}e.add(r)}}catch(e){}}(r)}catch(e){}}))}window.addEventListener("message",(e=>{try{if(!e.source||!e.data)return;if("PROVIDER_ACKNOWLEDGMENT"===e.data.type){const{providerName:r}=e.data;t.add(r)}if("CALL_METHOD"===e.data.type||"SUBSCRIBE_EVENT"===e.data.type||"UNSUBSCRIBE_EVENT"===e.data.type){const{providerName:t,methodName:o,args:s=[],requestId:i,eventName:n}=e.data;try{let c=window[t.split(".")[0]];if("XverseProviders.BitcoinProvider"===t&&(c=c.BitcoinProvider),"CALL_METHOD"===e.data.type&&c&&"function"==typeof c[o])try{const t=c[o](...s);t instanceof Promise?t.then((t=>{e.source.postMessage({type:"METHOD_RESPONSE",requestId:i,result:t},e.origin)})).catch((t=>{e.source.postMessage({type:"METHOD_RESPONSE",requestId:i,error:t.message},e.origin)})):e.source.postMessage({type:"METHOD_RESPONSE",requestId:i,result:t},e.origin)}catch(t){e.source.postMessage({type:"METHOD_RESPONSE",requestId:i,error:t.message},e.origin)}if("SUBSCRIBE_EVENT"===e.data.type&&c&&"function"==typeof c.on)try{r[t]||(r[t]={}),r[t][n]||(r[t][n]=new Set,c.on(n,(e=>{r[t][n].forEach((r=>{try{r.postMessage({type:"EVENT_TRIGGER",providerName:t,eventName:n,data:e},a)}catch(e){}}))}))),r[t][n].add(e.source)}catch(e){}"UNSUBSCRIBE_EVENT"===e.data.type&&r[t]&&r[t][n]&&(r[t][n].delete(e.source),0===r[t][n].size&&delete r[t][n])}catch(t){"CALL_METHOD"===e.data.type&&e.source.postMessage({type:"METHOD_RESPONSE",requestId:i,error:t.message},e.origin)}}}catch(e){}})),n();const c=setInterval(n,1e3);setTimeout((()=>{c&&clearInterval(c)}),3e4),window.addEventListener("beforeunload",(()=>clearInterval(c)))}();