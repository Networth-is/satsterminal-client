!function(){console.log("YAYYYY ITS LOADING");const e=new Set,o=new Set,t={};function r(e){return Object.keys(e).filter((o=>"function"==typeof e[o]))}window.addEventListener("message",(e=>{if("PROVIDER_ACKNOWLEDGMENT"===e.data.type){const{providerName:t}=e.data;o.add(t),console.log(`Acknowledgment received for provider: ${t}`),o.size===n.length&&(console.log("All providers acknowledged, stopping observer"),s.disconnect())}if("CALL_METHOD"===e.data.type||"SUBSCRIBE_EVENT"===e.data.type){const{providerName:o,methodName:r,args:n,requestId:s,eventName:i}=e.data;let d=window[o.split(".")[0]];"XverseProviders.BitcoinProvider"===o&&(d=d&&d.BitcoinProvider),"CALL_METHOD"===e.data.type&&d&&"function"==typeof d[r]&&d[r](...n).then((o=>{e.source.postMessage({type:"METHOD_RESPONSE",requestId:s,result:o},e.origin)})).catch((o=>{e.source.postMessage({type:"METHOD_RESPONSE",requestId:s,error:o.message},e.origin)})),"SUBSCRIBE_EVENT"===e.data.type&&d&&"function"==typeof d.on&&(t[o]||(t[o]={}),t[o][i]||(t[o][i]=[],d.on(i,(e=>{t[o][i].forEach((t=>{t.contentWindow.postMessage({type:"EVENT_TRIGGER",providerName:o,eventName:i,data:e},"*")}))}))),t[o][i].push(e.source))}}));const n=["unisat","XverseProviders","magicEden","okxwallet","LeatherProvider","phantom","OrangeWalletProviders"],s=new MutationObserver((()=>{n.forEach((t=>{window[t]&&function(t){const n=window[t];if(n&&!o.has(t)){if("XverseProviders"===t&&n.BitcoinProvider){const e=r(n);document.querySelectorAll("iframe").forEach((o=>{o.contentWindow.postMessage({type:"PROVIDER_METADATA",providerName:"XverseProviders",methods:e},"*")}));const o=r(n.BitcoinProvider);document.querySelectorAll("iframe").forEach((e=>{e.contentWindow.postMessage({type:"PROVIDER_METADATA",providerName:"XverseProviders.BitcoinProvider",methods:o},"*")}))}else{const e=r(n);document.querySelectorAll("iframe").forEach((o=>{o.contentWindow.postMessage({type:"PROVIDER_METADATA",providerName:t,methods:e},"*")}))}e.add(t)}}(t)}))}));s.observe(document.documentElement,{childList:!0,subtree:!0}),setTimeout((()=>{s&&(console.log("Stopping observer after timeout"),s.disconnect())}),3e4),window.addEventListener("beforeunload",(()=>s.disconnect()))}();